document.addEventListener('DOMContentLoaded', function () {
    // Get all elements with the class 'bibtex-pre'
    var bibtexBlocks = document.querySelectorAll('.bibtex-pre');

    // Loop through each bibtex block and add a click event listener
    bibtexBlocks.forEach(function (bibtexPre) {
        bibtexPre.addEventListener('click', function () {
            // Create a range that selects all the text in the clicked pre element
            var range = document.createRange();
            range.selectNodeContents(bibtexPre);

            // Get the selection object
            var selection = window.getSelection();
            selection.removeAllRanges(); // Clear any existing selections
            selection.addRange(range);   // Add the range with the pre text
        });
    });

    // Add event listener to the bibtex toggle buttons to show the message
    var bibtexButtons = document.querySelectorAll('[data-toggle="collapse"][data-target^="#bibtex"]');

    bibtexButtons.forEach(function (bibtexButton) {
        bibtexButton.addEventListener('click', function () {
            var targetId = bibtexButton.getAttribute('data-target');
            var messageDiv = document.querySelector(targetId + ' .bibtex-message');

            // Toggle the display of the message when the bibtex is expanded
            if (messageDiv) {
                var isExpanded = document.querySelector(targetId).classList.contains('in') || false;
                messageDiv.style.display = isExpanded ? 'none' : 'block';
            }
        });
    });
});